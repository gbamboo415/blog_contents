---
Keyword: 
Copyright: (C) 2019 青竹
---

# 常時SSL化に伴うWordPressのサイトアドレス変更でハマった話（後半）

# 後半：WordPressの設定変更でハマる

今回は、常時SSL化の実施とともに、独自ドメインを設定し、その際に、 aotake91.net で、WordPressのディレクトリを指すように設定変更しました。
そのため、一般的な設定変更の方法と比べて、設定すべき値が微妙に違っており、ドツボにハマる原因となりました。

## 手順1：アドレスを新しいものに書き換える

WordPressには、

* WordPressアドレス (URL)
* サイトアドレス (URL)

の2つの設定項目があります。常時SSL化にあたっては、2つの項目の先頭にある「http://」を「https://」に書き換えればよいのですが、今回は独自ドメインの設定も同時に行っていました。
両方の設定項目を書き換えて設定更新をしたところ、設定画面が開かなくなり、**500 Internal Server Error** が出るようになりました。

ロリポップ！のレンタルサーバは、phpMyAdminを利用できたため、データベースに直接アクセスして設定値を元に戻し、再度変更してはエラーが出て元に戻し、書き方を変えてエラーが出ては元に戻し……と1時間ほど格闘する羽目になりました。最終的に落ち着いた当サイトでの設定は、

* WordPressアドレス (URL)：https://aotake91.net
* サイトアドレス (URL)：https://aotake91.net

すなわち、両方を同じ値とすることでした。

## 手順2：ページ内にある、旧アドレスの絶対URLを新URLに書き換える

常時SSL化を実現するためには、そのサイトに対する通信のすべてがHTTPSで行われるようにしなければなりません。そのため、元々のアドレスが絶対URLとして書かれている記事を、新しいアドレスのURLに置き換える必要があります。
これには、「Search Regex」プラグインを用いて一括変換を実施しました。

一部、固定ページについては手動でURLを書き換えました。

## 手順3：再設定・設定更新の実施

ここまできて、トップページは正常に表示されるようになりましたが、個別記事ページ、固定ページが500エラーで表示されません。最終的には、「設定」 > 「パーマリンク設定」から、設定を一切変更せずに「設定」ボタンを押すことで解決しました。

これでサイトの常時SSL化・独自ドメイン化が完了しました。

