---
Keyword: 
Copyright: (C) 2019 青竹
---

# 常時SSL化に伴うWordPressのサイトアドレス変更でハマった話（前半）

昨日実施した、常時SSL化・独自ドメイン化にともない発生した問題と、その対応をまとめてみます。

# 記事要約

* 常時SSL化はドメイン取得→ドメインをサーバに設定後、常時SSL化サービス設定ワンクリックでできた。
* しかし、WordPressのサイトパスを変更したら、Internal Server Error (500エラー) が発生
* サイトパスの問題解消後も、固定ページ表示時に500エラー
* パーマリンク設定を更新して解決

# はじめに：常時SSL化を思い立ったきっかけ

ここ数年、ウェブサイトに関するすべての通信にSSL (TLS) を用いて、通信の安全性を高める取り組みが広く行われています。従来はSSL (TLS) 化に際して必要な証明書の費用が高いこともあって、趣味的なサイトである当サイトは、常時SSL化をしないままとしていました。

最近、HTTPの新しいバージョン「HTTP/2」が制定され、SSL (TLS) を用いると従来より高速なページ表示が行えるようになったこと、また、「Let's Encrypt」など、無料で証明書を取得できるサービスが整備されてきました。

そんな中、無料のウェブサイト作成サービス「Wix」で作られたサイトを閲覧している時、ふとそのサイトがデフォルトでSSL (TLS) を用いたページ表示に対応していることに気付き、「ひとつやってみるか」と決断した次第です。

# 前半：独自ドメイン取得から常時SSL化設定まで

当サイトはロリポップ！レンタルサーバ上に置いています。ロリポップ！では、SSL (TLS) 化の手段として「共有SSL」と「独自SSL」の2通りが提供されています。共有SSLはデフォルトで提供されていますが、システムの都合上、ウェブサイトのアドレスが変わってしまいます。当サイトの場合ですと、従来は aotake-rail.raindrop.jp でしたが、共有SSLですと raindrop-aotake-rail.ssl-lolipop.jp となってしまいます。独自SSLですと、独自ドメインを取得（→ウェブサイトのアドレスを変更）した上で、サイト全体にSSL (TLS) による通信を適用することになります。

いずれにせよアドレスが変わるならば、好みのアドレスにしよう。そう考えたため、独自SSLによる常時SSL化を決めました。

独自ドメインは、今年夏にマストドンサーバを立ち上げるテストをした際に利用した、お名前.com で取得しました。ネームサーバをロリポップ！指定のサーバに設定して、ロリポップ！のサーバ管理画面から、独自SSLを設定しました。ワンクリックで Let's Encrypt の証明書取得から設定まで自動で行ってくれるため、楽に設定できました。

（続きは後半で）

